let AstNode,Post,MeBlock,format;_5fc‍.x([["default",()=>Program]]);_5fc‍.w("../libs/astNode.js",[["default",["AstNode"],function(v){AstNode=v}]]);_5fc‍.w("./post",[["default",["Post"],function(v){Post=v}]]);_5fc‍.w("./meBlock.js",[["default",["MeBlock"],function(v){MeBlock=v}]]);_5fc‍.w("util",[["format",["format"],function(v){format=v}]]);




               class Program extends AstNode {

    constructor() {
        console.log("calling super");
        super();
        this.blogItems = [];
        this.blogType = "";
        this.blogName = "";
        this.tokenizer = AstNode.nodeTokenizer();
        _5fc‍.g.console.log(AstNode.nodeTokenizer());
    }

    mockParse(val) {
        console.log("mock parse for program");
        var s = null;
        if (val == 1) {
            s = new MeBlock();
        } else {
            s = new Post();
        }
        s.mockParse();
        this.blogItems.push(s);;
        _5fc‍.g.console.log(this.blogItems.length);
    }

    parse() {
        console.log("program.js, beginning parsing");
        this.tokenizer.getAndCheckNext("Create");
        this.blogType = this.tokenizer.getNext();
        this.blogName = this.tokenizer.getNext();

        _5fc‍.g.console.log("Blog type: " + this.blogType);
        _5fc‍.g.console.log("Blog name: " + this.blogName);

        if (this.tokenizer.checkToken("Format")) {
            var blogFormat = new Format();
            blogFormat.parse();
        } else {
            console.log("Blog Format not found");
            process.exit(0);
        }

        if (tokenizer.CheckToken("Aboutme")) {
            var meBlock = new MeBlock();
            meBlock.parse();
        } else {
            console.log("MeBlock (About me) not found");
            process.exit(0);
        }

        while(!tokenizer.checkToken("Donefornow")) {
                var post = null;
                
                if (tokenizer.CheckToken("Post")) {
                    post = new Post();
                    post.parse();
                    this.blogItems.push(post);
                }
        }
    }

    evaluate() {

        var htmlBeginning = `<!DOCTYPE html>
                            <html>
                            <meta name="viewport" content = "width=device-width, initial-scale=1">
                            <body>
                            <div class="blogTitle">
                                <h2>${this.blogName}</h2>
                            </div>`;
        var htmlEnding = `</body>
                            </html>`;
        this.fs.appendFileSync("output.html", htmlBeginning);
        var itemLength = this.blogItems.length;
        for (var i = 0; i < itemLength; i++) {
            blogItems[i].evaluate();
        }
        this.fs.appendFileSync("output.html", htmlEnd);
    }
}

